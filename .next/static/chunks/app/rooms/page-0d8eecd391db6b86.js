(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[497],{4601:(e,l,t)=>{Promise.resolve().then(t.bind(t,1010))},837:(e,l,t)=>{"use strict";t.d(l,{G_:()=>r,Sx:()=>o,R4:()=>i});var s=t(2651);let a={GET_ROOMS:()=>"http://localhost:5000/api/rooms",GET_ROOMSDETAILS:()=>"http://localhost:5000/api/roomdetails",BOOKING_ROOMS:()=>"http://localhost:5000/api/book",UPDATE_ROOM_STATUS:e=>"http://localhost:5000/api/roomdetails/:".concat(e,"/status/update")};Object.freeze(a);let r=()=>{let e=a.GET_ROOMSDETAILS();return console.log("Requesting URL:",e),s.A.get(e).then(e=>(console.log("API Response:",e.data),{result:e.data})).catch(e=>(console.error("Error details:",{message:e.message,code:e.code,config:e.config,response:e.response}),{result:null}))},o=e=>s.A.get("".concat(a.GET_ROOMSDETAILS(),"/").concat(e)).then(e=>(console.log("API Response:",e.data),{result:e.data})).catch(e=>(console.error("Error fetching room data:",e),{result:null})),i=async e=>{try{let l=await fetch(a.BOOKING_ROOMS(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!l.ok)throw Error("Booking failed");return await l.json()}catch(e){throw console.error("Error in roomBooking:",e),e}}},1010:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>d});var s=t(5155),a=t(2115),r=t(837),o=t(5565),i=t(7396);let c=(e,l,t,a)=>(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"font-semibold text-lg",children:e}),(0,s.jsx)("ul",{className:"space-y-2 mt-2",children:Object.keys(l).map(e=>(0,s.jsx)("li",{children:(0,s.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:l[e],onChange:()=>a(t,e),className:"form-checkbox"}),(0,s.jsx)("span",{className:"capitalize",children:e.replace(/([A-Z])/g," $1").toLowerCase()})]})},e))})]}),n=e=>{let{room:l}=e;return(0,s.jsxs)("div",{className:"bg-white shadow-lg rounded-md overflow-hidden flex flex-col",children:[(0,s.jsx)(o.default,{src:l.image||"/images/img1.jpg",alt:l.title,width:500,height:300,className:"w-full h-[200px] object-cover"}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold flex justify-between items-center",children:[l.title,(0,s.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(l.available?"bg-green-500":"bg-red-500"," text-white"),children:l.available?"Available":"Booked"})]}),(0,s.jsx)("p",{className:"text-gray-700 mt-2",children:l.description||"No description available."}),(0,s.jsx)("p",{className:"text-yellow-500 mt-2",children:Array(l.rating).fill("â˜…").join("")}),(0,s.jsx)(i.default,{href:"/rooms/".concat(l._id),className:"block mt-4 text-center bg-blue-500 text-white py-2 rounded-md hover:bg-blue-600",children:"View Room"})]})]})},d=()=>{let[e,l]=(0,a.useState)([]),[t,o]=(0,a.useState)([]),[d,u]=(0,a.useState)(!1),[m,h]=(0,a.useState)({popular:{superDeluxe:!1,available:!1,bestRatings:!1},room:{available:!1,booked:!1,deluxe:!1,superDeluxe:!1},propertyType:{hotels:!1,homestays:!1},facilities:{parking:!1,restaurant:!1,petsAllowed:!1}}),[p,x]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{let e=await (0,r.G_)();(null==e?void 0:e.result)&&Array.isArray(e.result)?(l(e.result),o(e.result)):x("Failed to fetch rooms data.")}catch(e){console.error(e),x("Error fetching rooms data.")}})()},[]),(0,a.useEffect)(()=>{(()=>{let l=[...e],{popular:t,room:s,propertyType:a,facilities:r}=m;t.superDeluxe&&(l=l.filter(e=>e.title.includes("Super Deluxe"))),t.available&&(l=l.filter(e=>"available"===e.status)),t.bestRatings&&(l=l.filter(e=>e.rating>=4)),s.available&&(l=l.filter(e=>"available"===e.status)),s.booked&&(l=l.filter(e=>"booked"===e.status)),s.deluxe&&(l=l.filter(e=>e.title.includes("Deluxe"))),s.superDeluxe&&(l=l.filter(e=>e.title.includes("Super Deluxe"))),a.hotels&&(l=l.filter(e=>"Hotel"===e.propertyType)),a.homestays&&(l=l.filter(e=>"Homestay"===e.propertyType)),r.parking&&(l=l.filter(e=>e.features.includes("Parking"))),r.restaurant&&(l=l.filter(e=>e.features.includes("Restaurant"))),r.petsAllowed&&(l=l.filter(e=>e.features.includes("Pets allowed"))),o(l)})()},[m,e]);let f=(e,l)=>{h(t=>({...t,[e]:{...t[e],[l]:!t[e][l]}}))};return p?(0,s.jsx)("div",{className:"text-center text-red-600",children:p}):(0,s.jsxs)("div",{className:"font-sans ",children:[(0,s.jsxs)("section",{className:"h-[400px] bg-cover bg-center flex flex-col justify-center items-center text-white",style:{backgroundImage:"url('/images/img2.jpg')"},children:[(0,s.jsx)("h1",{className:"text-4xl font-bold",children:"Rooms & Suites"}),(0,s.jsxs)("nav",{className:"text-lg mt-2",children:[(0,s.jsx)(i.default,{href:"/",className:"hover:underline",children:"Home /"}),(0,s.jsx)(i.default,{href:"/rooms",className:"hover:underline",children:"Rooms & Suites"})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap p-5 ",children:[(0,s.jsxs)("aside",{className:"p-4 bg-gray-100 transition-all duration-300 w-full md:w-1/4 ".concat(d?"block":"hidden"," md:block"),children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Filter by"}),c("Popular Filters",m.popular,"popular",f),c("Room Filters",m.room,"room",f),c("Property Type",m.propertyType,"propertyType",f),c("Facilities",m.facilities,"facilities",f)]}),(0,s.jsxs)("main",{className:"w-full md:w-3/4 p-6",children:[(0,s.jsx)("h2",{className:"text-3xl font-semibold mb-6",children:"Available Rooms"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.length>0?t.map(e=>(0,s.jsx)(n,{room:e},e._id)):(0,s.jsx)("p",{className:"col-span-full text-center text-gray-600",children:"No rooms available."})})]})]})]})}}},e=>{var l=l=>e(e.s=l);e.O(0,[839,565,604,441,517,358],()=>l(4601)),_N_E=e.O()}]);