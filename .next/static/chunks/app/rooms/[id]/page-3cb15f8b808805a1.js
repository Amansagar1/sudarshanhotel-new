(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[781],{752:(e,t,s)=>{Promise.resolve().then(s.bind(s,6438))},8368:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>n});let r={_origin:"https://api.emailjs.com"},a=(e,t,s)=>{if(!e)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!s)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class l{constructor(e){this.status=e.status,this.text=e.responseText}}let i=(e,t,s={})=>new Promise((a,i)=>{let o=new XMLHttpRequest;o.addEventListener("load",({target:e})=>{let t=new l(e);200===t.status||"OK"===t.text?a(t):i(t)}),o.addEventListener("error",({target:e})=>{i(new l(e))}),o.open("POST",r._origin+e,!0),Object.keys(s).forEach(e=>{o.setRequestHeader(e,s[e])}),o.send(t)}),o=e=>{let t;if(!(t="string"==typeof e?document.querySelector(e):e)||"FORM"!==t.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return t},n={init:(e,t="https://api.emailjs.com")=>{r._userID=e,r._origin=t},send:(e,t,s,l)=>{let o=l||r._userID;return a(o,e,t),i("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:o,service_id:e,template_id:t,template_params:s}),{"Content-type":"application/json"})},sendForm:(e,t,s,l)=>{let n=l||r._userID,c=o(s);a(n,e,t);let d=new FormData(c);return d.append("lib_version","3.2.0"),d.append("service_id",e),d.append("template_id",t),d.append("user_id",n),i("/api/v1.0/email/send-form",d)}}},6046:(e,t,s)=>{"use strict";var r=s(6658);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},1894:(e,t,s)=>{"use strict";s.d(t,{G_:()=>i,Sx:()=>o,R4:()=>n});var r=s(2651);let a="http://localhost:5000/api",l={GET_ROOMSDETAILS:()=>a+"/roomdetails",BOOKING_ROOMS:()=>a+"/book",POST_ROOMS:()=>a+"/rooms",GET_ROOMID:e=>a+"/rooms/:".concat(e," ")};Object.freeze(l);let i=()=>{let e=l.GET_ROOMSDETAILS();return console.log("Requesting URL:",e),r.A.get(e).then(e=>(console.log("API Response:",e.data),{result:e.data})).catch(e=>(console.error("Error details:",{message:e.message,code:e.code,config:e.config,response:e.response}),{result:null}))},o=e=>r.A.get("".concat(l.GET_ROOMSDETAILS(),"/").concat(e)).then(e=>(console.log("API Response:",e.data),{result:e.data})).catch(e=>(console.error("Error fetching room data:",e),{result:null})),n=async e=>{try{let t=await fetch(l.BOOKING_ROOMS(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Booking failed");return await t.json()}catch(e){throw console.error("Error in roomBooking:",e),e}}},6438:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(5155),a=s(2115),l=s(6046),i=s(1894),o=s(1536),n=s(5565),c=s(7396),d=s(8368);let m=e=>{let{isVisible:t,onClose:s,roomDetails:l}=e,[o,n]=(0,a.useState)({firstName:"",lastName:"",address:"",city:"",pincode:"",phone:"",email:"",checkIn:"",checkOut:"",checkInTime:"",checkOutTime:"",roomPreference:"",numberOfAdults:"",roomId:null==l?void 0:l._id,price:null==l?void 0:l.price,title:null==l?void 0:l.title}),[c,m]=(0,a.useState)(!1),[u,h]=(0,a.useState)({}),[b,p]=(0,a.useState)(!1);(0,a.useEffect)(()=>{console.log("Room Details:",l)},[l]);let g=e=>{let{name:t,value:s}=e.target;n(e=>({...e,[t]:s})),h(e=>({...e,[t]:""}))},f=()=>{let e={};return Object.keys(o).forEach(t=>{o[t]||"roomPreference"===t||(e[t]="This field is required.")}),o.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)&&(e.email="Please enter a valid email address."),o.phone&&!/^[0-9]{10}$/.test(o.phone)&&(e.phone="Phone number must be 10 digits."),o.checkInTime>=o.checkOutTime&&(e.checkOutTime="Check-out time must be later than check-in time."),h(e),0===Object.keys(e).length},x=async e=>{let t={to_name:"".concat(e.firstName," ").concat(e.lastName),to_email:e.email,room_title:e.title,check_in:"".concat(e.checkIn," at ").concat(e.checkInTime),check_out:"".concat(e.checkOut," at ").concat(e.checkOutTime),price:e.price},s={to_name:"Hotel Management",to_email:"hotelsudarshan01@gmail.com",...e};try{await d.Ay.send("service_ap02rab","template_2ys919i",t,"e8oLmeL97LLcEGZ_X"),console.log("Email sent to user successfully."),await d.Ay.send("service_ap02rab","template_2ys919i",s,"e8oLmeL97LLcEGZ_X"),console.log("Email sent to hotel successfully.")}catch(e){console.error("Error sending emails:",e)}},y=async e=>{if(e.preventDefault(),!f()){alert("Please correct the highlighted errors.");return}p(!0);try{let e=await (0,i.R4)(o);e.success?(m(!0),alert("Booking successful!"),await x(o)):alert("Booking failed: ".concat(e.message))}catch(e){console.error("Error during booking:",e),alert("An error occurred while processing your booking. Please try again.")}finally{p(!1)}};return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 w-full",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-5 w-[800px]",children:[(0,r.jsx)("div",{className:"h-48 bg-cover bg-center relative",style:{backgroundImage:"url('/images/img4.jpg')"},children:(0,r.jsx)("div",{className:"bg-black bg-opacity-50 h-full flex items-center justify-center text-white",children:(0,r.jsx)("h1",{className:"text-3xl font-bold",children:c?"Booking Confirmed!":"Complete Your Booking"})})}),(0,r.jsx)("div",{className:"p-6",children:c?(0,r.jsxs)("div",{className:"text-center p-4",children:[(0,r.jsx)("h2",{className:"text-2xl text-green-500 font-semibold",children:"Thank you for choosing us!"}),(0,r.jsx)("p",{className:"mt-4 text-gray-700",children:"Your booking was successful. We look forward to your stay!"}),(0,r.jsx)("button",{onClick:s,className:"mt-6 bg-blue-500 text-white py-2 px-6 rounded-lg hover:bg-blue-600",children:"Close"})]}):(0,r.jsxs)("form",{onSubmit:y,className:"space-y-4 overflow-scroll h-[500px]",children:[[{label:"First Name",name:"firstName"},{label:"Last Name",name:"lastName"},{label:"Address",name:"address"},{label:"City",name:"city"},{label:"Pincode",name:"pincode"},{label:"Phone",name:"phone"},{label:"Email",name:"email"},{label:"Check-in Date",name:"checkIn",type:"date"},{label:"Check-out Date",name:"checkOut",type:"date"},{label:"Check-in Time",name:"checkInTime",type:"time"},{label:"Check-out Time",name:"checkOutTime",type:"time"},{label:"Number of Adults",name:"numberOfAdults"}].map((e,t)=>(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:e.label}),(0,r.jsx)("input",{type:e.type||"text",name:e.name,value:o[e.name],onChange:g,className:"w-full p-2 border rounded-lg ".concat(u[e.name]?"border-red-500":"border-gray-300")}),u[e.name]&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:u[e.name]})]},t)),(0,r.jsxs)("div",{className:"flex justify-end gap-4 mt-6",children:[(0,r.jsx)("button",{type:"submit",disabled:b,className:"bg-blue-500 text-white font-medium py-2 px-6 rounded-lg ".concat(b?"opacity-50 cursor-not-allowed":"hover:bg-blue-600"),children:b?"Submitting...":"Confirm Booking"}),(0,r.jsx)("button",{type:"button",onClick:s,className:"border border-red-500 text-red-500 font-medium py-2 px-6 rounded-lg hover:bg-red-100",children:"Cancel"})]})]})})]})}):null},u=()=>{var e,t,s;let[d,u]=(0,a.useState)(null),[h,b]=(0,a.useState)(null),{id:p}=(0,l.useParams)(),[g,f]=(0,a.useState)(0),[x,y]=(0,a.useState)(!1),[v,j]=(0,a.useState)(!1),N=(0,l.useRouter)();(0,a.useEffect)(()=>{(async()=>{let e=await fetch("/api/auth/session").then(e=>e.json());j(null!=e&&!!e.user)})()}),(0,a.useEffect)(()=>{(async()=>{try{if(p){let e=await (0,i.Sx)(p);e&&e.result?u(e.result):b("Room not found.")}}catch(e){b("Error fetching room details."),console.error("Fetch Error:",e)}})()},[p]);let w=(null==d?void 0:d.images)||["/images/img1.jpg","/images/img2.jpg","/images/img3.jpg"],O=async e=>{let t={...e,roomId:d._id,roomTitle:d.title,roomPrice:d.price};try{let e=await fetch("/api/book",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await e.json();s.success?(console.log("Booking confirmed:",s),await fetch("../../../pages/api/sendMail.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:s.userEmail,bookingData:t})})):console.error("Booking failed:",s.message)}catch(e){console.error("Error during booking:",e)}};return h?(0,r.jsx)("div",{className:"text-center text-red-500",children:h}):d?(0,r.jsxs)("div",{className:"font-sans w-full",children:[(0,r.jsxs)("div",{className:"relative bg-cover bg-center h-[400px] flex items-center justify-center text-center text-white",style:{backgroundImage:"url('/images/img2.jpg')"},children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50"}),(0,r.jsxs)("div",{className:"relative z-10 w-full max-w-5xl mx-auto p-4",children:[(0,r.jsx)("h1",{className:"text-4xl md:text-5xl font-extrabold leading-tight",children:d.title}),(0,r.jsxs)("div",{className:"text-lg mt-4",children:[(0,r.jsx)(c.default,{href:"/",className:"hover:underline",children:"Home /"}),(0,r.jsx)("span",{className:"text-lg mt-2",children:(0,r.jsx)(c.default,{href:"/rooms",className:"hover:underline",children:"Rooms & Suites"})})]})]})]}),(0,r.jsx)("div",{className:"w-full flex justify-center items-center bg-yellow-100 h-auto p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl w-full bg-white shadow-lg rounded-lg flex flex-col md:flex-row",children:[(0,r.jsxs)("div",{className:"relative w-full md:w-1/2 bg-gray-200 h-[400px] md:h-auto",children:[(0,r.jsx)(n.default,{src:w[g]||"/images/img1.jpg",alt:"Room Image",className:"w-full h-full object-cover rounded-l-lg fill",width:300,height:300,objectFit:"cover"}),(0,r.jsx)("button",{onClick:()=>{f(e=>0===e?w.length-1:e-1)},className:"absolute top-1/2 left-2 text-white bg-black bg-opacity-50 p-2 rounded-full",children:"<"}),(0,r.jsx)("button",{onClick:()=>{f(e=>(e+1)%w.length)},className:"absolute top-1/2 right-2 text-white bg-black bg-opacity-50 p-2 rounded-full",children:">"})]}),(0,r.jsxs)("div",{className:"w-full md:w-1/2 p-8",children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold w-full justify-between flex",children:[d.title,(0,r.jsx)("span",{children:(0,r.jsx)("div",{className:"top-4 right-4 px-4 py-2 text-sm rounded-full ".concat(d.available?"bg-green-500":"bg-red-500"," text-white"),children:d.available?"Available":"Not Available"})})]}),(0,r.jsx)("p",{className:"text-gray-700 mb-6",children:d.description||"Description not available"}),(0,r.jsxs)("p",{className:"text-lg font-semibold mb-4",children:["Price: ",d.price||"N/A"]}),(0,r.jsxs)("p",{className:"text-yellow-500 font-bold mb-6",children:["Rating: ",d.rating||"No rating"," ⭐"]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Features"}),(0,r.jsx)("ul",{className:"list-disc list-inside text-gray-700",children:(null===(e=d.features)||void 0===e?void 0:e.length)?d.features.map((e,t)=>(0,r.jsx)("li",{children:e},t)):(0,r.jsx)("li",{children:"No features available"})})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Room Amenities"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-4 text-gray-700",children:(null===(t=d.amenities)||void 0===t?void 0:t.length)?d.amenities.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(o.pXu,{className:"text-blue-500"})," ",e]},t)):(0,r.jsx)("p",{children:"No amenities available"})})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Facilities"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-4 text-gray-700",children:(null===(s=d.facilities)||void 0===s?void 0:s.length)?d.facilities.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(o.sPh,{className:"text-blue-500"})," ",e]},t)):(0,r.jsx)("p",{children:"No facilities available"})})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("button",{className:"py-2 rounded-lg font-semibold ".concat(d.available?"bg-blue-500 text-white hover:bg-blue-600 cursor-pointer":"bg-gray-400 text-gray-600 cursor-not-allowed"),onClick:()=>{v?y(!0):N.push("/login")},disabled:!d.available,children:d.available?"Book - ".concat(d.price||"N/A"):"Room Unavailable"}),(0,r.jsx)("button",{className:"bg-transparent text-blue-500 font-semibold py-2 rounded-lg border border-blue-500",children:"Save to Wishlist"})]})]})]})}),(0,r.jsx)(m,{isVisible:x,onClose:()=>{y(!1)},onSubmit:O,roomDetails:d})]}):(0,r.jsx)("div",{className:"text-center",children:"Loading..."})}},3435:(e,t,s)=>{"use strict";s.d(t,{k5:()=>d});var r=s(2115),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=r.createContext&&r.createContext(a),i=["attr","size","title"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach(function(t){var r,a;r=t,a=s[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function d(e){return t=>r.createElement(m,o({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,s)=>r.createElement(t.tag,c({key:s},t.attr),e(t.child)))}(e.child))}function m(e){var t=t=>{var s,{attr:a,size:l,title:n}=e,d=function(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;s[r]=e[r]}return s}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)s=l[r],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}(e,i),m=l||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),r.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,d,{className:s,style:c(c({color:e.color||t.color},t.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),n&&r.createElement("title",null,n),e.children)};return void 0!==l?r.createElement(l.Consumer,null,e=>t(e)):t(a)}}},e=>{var t=t=>e(e.s=t);e.O(0,[711,839,565,604,441,517,358],()=>t(752)),_N_E=e.O()}]);