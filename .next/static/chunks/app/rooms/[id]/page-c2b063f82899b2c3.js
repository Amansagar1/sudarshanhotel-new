(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[781],{752:(e,t,s)=>{Promise.resolve().then(s.bind(s,6438))},8368:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>n});let a={_origin:"https://api.emailjs.com"},l=(e,t,s)=>{if(!e)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!s)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class r{constructor(e){this.status=e.status,this.text=e.responseText}}let i=(e,t,s={})=>new Promise((l,i)=>{let o=new XMLHttpRequest;o.addEventListener("load",({target:e})=>{let t=new r(e);200===t.status||"OK"===t.text?l(t):i(t)}),o.addEventListener("error",({target:e})=>{i(new r(e))}),o.open("POST",a._origin+e,!0),Object.keys(s).forEach(e=>{o.setRequestHeader(e,s[e])}),o.send(t)}),o=e=>{let t;if(!(t="string"==typeof e?document.querySelector(e):e)||"FORM"!==t.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return t},n={init:(e,t="https://api.emailjs.com")=>{a._userID=e,a._origin=t},send:(e,t,s,r)=>{let o=r||a._userID;return l(o,e,t),i("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:o,service_id:e,template_id:t,template_params:s}),{"Content-type":"application/json"})},sendForm:(e,t,s,r)=>{let n=r||a._userID,c=o(s);l(n,e,t);let d=new FormData(c);return d.append("lib_version","3.2.0"),d.append("service_id",e),d.append("template_id",t),d.append("user_id",n),i("/api/v1.0/email/send-form",d)}}},6046:(e,t,s)=>{"use strict";var a=s(6658);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},837:(e,t,s)=>{"use strict";s.d(t,{G_:()=>r,Sx:()=>i,R4:()=>o});var a=s(2651);let l={GET_ROOMSDETAILS:()=>"http://localhost:5000/api/roomdetails",BOOKING_ROOMS:()=>"http://localhost:5000/api/book",POST_ROOMS:()=>"http://localhost:5000/api/rooms",GET_ROOMID:e=>" http://localhost:5000/api/rooms/:".concat(e," ")};Object.freeze(l);let r=()=>{let e=l.GET_ROOMSDETAILS();return console.log("Requesting URL:",e),a.A.get(e).then(e=>(console.log("API Response:",e.data),{result:e.data})).catch(e=>(console.error("Error details:",{message:e.message,code:e.code,config:e.config,response:e.response}),{result:null}))},i=e=>a.A.get("".concat(l.GET_ROOMSDETAILS(),"/").concat(e)).then(e=>(console.log("API Response:",e.data),{result:e.data})).catch(e=>(console.error("Error fetching room data:",e),{result:null})),o=async e=>{try{let t=await fetch(l.BOOKING_ROOMS(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Booking failed");return await t.json()}catch(e){throw console.error("Error in roomBooking:",e),e}}},6438:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(5155),l=s(2115),r=s(6046),i=s(837),o=s(1536),n=s(5565),c=s(7396),d=s(8368);let m=e=>{let{isVisible:t,onClose:s,roomDetails:r}=e,[o,n]=(0,l.useState)({firstName:"",lastName:"",address:"",city:"",pincode:"",phone:"",email:"",checkIn:"",checkOut:"",checkInTime:"",checkOutTime:"",roomPreference:"",numberOfAdults:"",roomId:null==r?void 0:r._id,price:null==r?void 0:r.price,title:null==r?void 0:r.title}),[c,m]=(0,l.useState)(!1),[u,h]=(0,l.useState)({}),[p,b]=(0,l.useState)(!1);(0,l.useEffect)(()=>{console.log("Room Details:",r)},[r]);let g=e=>{let{name:t,value:s}=e.target;n(e=>({...e,[t]:s})),h(e=>({...e,[t]:""}))},f=()=>{let e={};return Object.keys(o).forEach(t=>{o[t]||"roomPreference"===t||(e[t]="This field is required.")}),o.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)&&(e.email="Please enter a valid email address."),o.phone&&!/^[0-9]{10}$/.test(o.phone)&&(e.phone="Phone number must be 10 digits."),o.checkInTime>=o.checkOutTime&&(e.checkOutTime="Check-out time must be later than check-in time."),h(e),0===Object.keys(e).length},x=async e=>{let t={to_name:"".concat(e.firstName," ").concat(e.lastName),to_email:e.email,room_title:e.title,check_in:"".concat(e.checkIn," at ").concat(e.checkInTime),check_out:"".concat(e.checkOut," at ").concat(e.checkOutTime),price:e.price},s={to_name:"Hotel Management",to_email:"hotelsudarshan01@gmail.com",...e};try{await d.Ay.send("service_ap02rab","template_2ys919i",t,"e8oLmeL97LLcEGZ_X"),console.log("Email sent to user successfully."),await d.Ay.send("service_ap02rab","template_2ys919i",s,"e8oLmeL97LLcEGZ_X"),console.log("Email sent to hotel successfully.")}catch(e){console.error("Error sending emails:",e)}},y=async e=>{if(e.preventDefault(),!f()){alert("Please correct the highlighted errors.");return}b(!0);try{let e=await (0,i.R4)(o);e.success?(m(!0),alert("Booking successful!"),await x(o)):alert("Booking failed: ".concat(e.message))}catch(e){console.error("Error during booking:",e),alert("An error occurred while processing your booking. Please try again.")}finally{b(!1)}};return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 w-full",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-5 w-[800px]",children:[(0,a.jsx)("div",{className:"h-48 bg-cover bg-center relative",style:{backgroundImage:"url('/images/img4.jpg')"},children:(0,a.jsx)("div",{className:"bg-black bg-opacity-50 h-full flex items-center justify-center text-white",children:(0,a.jsx)("h1",{className:"text-3xl font-bold",children:c?"Booking Confirmed!":"Complete Your Booking"})})}),(0,a.jsx)("div",{className:"p-6",children:c?(0,a.jsxs)("div",{className:"text-center p-4",children:[(0,a.jsx)("h2",{className:"text-2xl text-green-500 font-semibold",children:"Thank you for choosing us!"}),(0,a.jsx)("p",{className:"mt-4 text-gray-700",children:"Your booking was successful. We look forward to your stay!"}),(0,a.jsx)("button",{onClick:s,className:"mt-6 bg-blue-500 text-white py-2 px-6 rounded-lg hover:bg-blue-600",children:"Close"})]}):(0,a.jsxs)("form",{onSubmit:y,className:"space-y-4 overflow-scroll h-[500px]",children:[[{label:"First Name",name:"firstName"},{label:"Last Name",name:"lastName"},{label:"Address",name:"address"},{label:"City",name:"city"},{label:"Pincode",name:"pincode"},{label:"Phone",name:"phone"},{label:"Email",name:"email"},{label:"Check-in Date",name:"checkIn",type:"date"},{label:"Check-out Date",name:"checkOut",type:"date"},{label:"Check-in Time",name:"checkInTime",type:"time"},{label:"Check-out Time",name:"checkOutTime",type:"time"},{label:"Number of Adults",name:"numberOfAdults"}].map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:e.label}),(0,a.jsx)("input",{type:e.type||"text",name:e.name,value:o[e.name],onChange:g,className:"w-full p-2 border rounded-lg ".concat(u[e.name]?"border-red-500":"border-gray-300")}),u[e.name]&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:u[e.name]})]},t)),(0,a.jsxs)("div",{className:"flex justify-end gap-4 mt-6",children:[(0,a.jsx)("button",{type:"submit",disabled:p,className:"bg-blue-500 text-white font-medium py-2 px-6 rounded-lg ".concat(p?"opacity-50 cursor-not-allowed":"hover:bg-blue-600"),children:p?"Submitting...":"Confirm Booking"}),(0,a.jsx)("button",{type:"button",onClick:s,className:"border border-red-500 text-red-500 font-medium py-2 px-6 rounded-lg hover:bg-red-100",children:"Cancel"})]})]})})]})}):null},u=()=>{var e,t,s;let[d,u]=(0,l.useState)(null),[h,p]=(0,l.useState)(null),{id:b}=(0,r.useParams)(),[g,f]=(0,l.useState)(0),[x,y]=(0,l.useState)(!1),[v,j]=(0,l.useState)(!1),N=(0,r.useRouter)();(0,l.useEffect)(()=>{(async()=>{let e=await fetch("/api/auth/session").then(e=>e.json());j(null!=e&&!!e.user)})()}),(0,l.useEffect)(()=>{(async()=>{try{if(b){let e=await (0,i.Sx)(b);e&&e.result?u(e.result):p("Room not found.")}}catch(e){p("Error fetching room details."),console.error("Fetch Error:",e)}})()},[b]);let w=(null==d?void 0:d.images)||["/images/img1.jpg","/images/img2.jpg","/images/img3.jpg"],O=async e=>{let t={...e,roomId:d._id,roomTitle:d.title,roomPrice:d.price};try{let e=await fetch("/api/book",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await e.json();s.success?(console.log("Booking confirmed:",s),await fetch("../../../pages/api/sendMail.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:s.userEmail,bookingData:t})})):console.error("Booking failed:",s.message)}catch(e){console.error("Error during booking:",e)}};return h?(0,a.jsx)("div",{className:"text-center text-red-500",children:h}):d?(0,a.jsxs)("div",{className:"font-sans w-full",children:[(0,a.jsxs)("div",{className:"relative bg-cover bg-center h-[400px] flex items-center justify-center text-center text-white",style:{backgroundImage:"url('/images/img2.jpg')"},children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50"}),(0,a.jsxs)("div",{className:"relative z-10 w-full max-w-5xl mx-auto p-4",children:[(0,a.jsx)("h1",{className:"text-4xl md:text-5xl font-extrabold leading-tight",children:d.title}),(0,a.jsxs)("div",{className:"text-lg mt-4",children:[(0,a.jsx)(c.default,{href:"/",className:"hover:underline",children:"Home /"}),(0,a.jsx)("span",{className:"text-lg mt-2",children:(0,a.jsx)(c.default,{href:"/rooms",className:"hover:underline",children:"Rooms & Suites"})})]})]})]}),(0,a.jsx)("div",{className:"w-full flex justify-center items-center bg-yellow-100 h-auto p-8",children:(0,a.jsxs)("div",{className:"max-w-7xl w-full bg-white shadow-lg rounded-lg flex flex-col md:flex-row",children:[(0,a.jsxs)("div",{className:"relative w-full md:w-1/2 bg-gray-200 h-[400px] md:h-auto",children:[(0,a.jsx)(n.default,{src:w[g]||"/images/img1.jpg",alt:"Room Image",className:"w-full h-full object-cover rounded-l-lg",layout:"fill",objectFit:"cover"}),(0,a.jsx)("button",{onClick:()=>{f(e=>0===e?w.length-1:e-1)},className:"absolute top-1/2 left-2 text-white bg-black bg-opacity-50 p-2 rounded-full",children:"<"}),(0,a.jsx)("button",{onClick:()=>{f(e=>(e+1)%w.length)},className:"absolute top-1/2 right-2 text-white bg-black bg-opacity-50 p-2 rounded-full",children:">"})]}),(0,a.jsxs)("div",{className:"w-full md:w-1/2 p-8",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold w-full justify-between flex",children:[d.title,(0,a.jsx)("span",{children:(0,a.jsx)("div",{className:"top-4 right-4 px-4 py-2 text-sm rounded-full ".concat(d.available?"bg-green-500":"bg-red-500"," text-white"),children:d.available?"Available":"Not Available"})})]}),(0,a.jsx)("p",{className:"text-gray-700 mb-6",children:d.description||"Description not available"}),(0,a.jsxs)("p",{className:"text-lg font-semibold mb-4",children:["Price: ₹",d.price||"N/A"]}),(0,a.jsxs)("p",{className:"text-yellow-500 font-bold mb-6",children:["Rating: ",d.rating||"No rating"," ⭐"]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Features"}),(0,a.jsx)("ul",{className:"list-disc list-inside text-gray-700",children:(null===(e=d.features)||void 0===e?void 0:e.length)?d.features.map((e,t)=>(0,a.jsx)("li",{children:e},t)):(0,a.jsx)("li",{children:"No features available"})})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Room Amenities"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4 text-gray-700",children:(null===(t=d.amenities)||void 0===t?void 0:t.length)?d.amenities.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.pXu,{className:"text-blue-500"})," ",e]},t)):(0,a.jsx)("p",{children:"No amenities available"})})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Facilities"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4 text-gray-700",children:(null===(s=d.facilities)||void 0===s?void 0:s.length)?d.facilities.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.sPh,{className:"text-blue-500"})," ",e]},t)):(0,a.jsx)("p",{children:"No facilities available"})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("button",{className:"py-2 rounded-lg font-semibold ".concat(d.available?"bg-blue-500 text-white hover:bg-blue-600 cursor-pointer":"bg-gray-400 text-gray-600 cursor-not-allowed"),onClick:()=>{v?y(!0):N.push("/login")},disabled:!d.available,children:d.available?"Book - ".concat(d.price||"N/A"):"Room Unavailable"}),(0,a.jsx)("button",{className:"bg-transparent text-blue-500 font-semibold py-2 rounded-lg border border-blue-500",children:"Save to Wishlist"})]})]})]})}),(0,a.jsx)(m,{isVisible:x,onClose:()=>{y(!1)},onSubmit:O,roomDetails:d})]}):(0,a.jsx)("div",{className:"text-center",children:"Loading..."})}},3435:(e,t,s)=>{"use strict";s.d(t,{k5:()=>d});var a=s(2115),l={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},r=a.createContext&&a.createContext(l),i=["attr","size","title"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach(function(t){var a,l;a=t,l=s[t],(a=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(a))in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function d(e){return t=>a.createElement(m,o({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,s)=>a.createElement(t.tag,c({key:s},t.attr),e(t.child)))}(e.child))}function m(e){var t=t=>{var s,{attr:l,size:r,title:n}=e,d=function(e,t){if(null==e)return{};var s,a,l=function(e,t){if(null==e)return{};var s={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;s[a]=e[a]}return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(l[s]=e[s])}return l}(e,i),m=r||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),a.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,d,{className:s,style:c(c({color:e.color||t.color},t.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),n&&a.createElement("title",null,n),e.children)};return void 0!==r?a.createElement(r.Consumer,null,e=>t(e)):t(l)}}},e=>{var t=t=>e(e.s=t);e.O(0,[711,839,565,604,441,517,358],()=>t(752)),_N_E=e.O()}]);