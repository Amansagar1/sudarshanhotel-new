(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{9099:(e,t,r)=>{Promise.resolve().then(r.bind(r,4348))},6046:(e,t,r)=>{"use strict";var a=r(6658);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},5353:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return n}});let a=r(2115);function n(e,t){let r=(0,a.useRef)(()=>{}),n=(0,a.useRef)(()=>{});return(0,a.useMemo)(()=>e&&t?a=>{null===a?(r.current(),n.current()):(r.current=s(e,a),n.current=s(t,a))}:e||t,[e,t])}function s(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3576:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return a}});let a=r(306)._(r(2115)).default.createContext(null)},4348:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var a=r(5155),n=r(2115),s=r(9506),l=r(5565),o=r(2615),i=r(6046);let u=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),d=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let m=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:l,className:o="",children:i,iconNode:u,...m}=e;return(0,n.createElement)("svg",{ref:t,...c,width:a,height:a,stroke:r,strokeWidth:l?24*Number(s)/Number(a):s,className:d("lucide",o),...m},[...u.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(i)?i:[i]])}),f=((e,t)=>{let r=(0,n.forwardRef)((r,a)=>{let{className:s,...l}=r;return(0,n.createElement)(m,{ref:a,iconNode:t,className:d("lucide-".concat(u(e)),s),...l})});return r.displayName="".concat(e),r})("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),h=()=>{let e=(0,i.useRouter)(),{data:t,status:r}=(0,o.useSession)(),[u,d]=(0,n.useState)(!1),[c,m]=(0,n.useState)(!1),[h,g]=(0,n.useState)(""),[x,p]=(0,n.useState)(""),[b,v]=(0,n.useState)(""),[y,j]=(0,n.useState)(""),[w,N]=(0,n.useState)(""),[S,C]=(0,n.useState)("");(0,n.useEffect)(()=>{console.log("Auth Status:",r),console.log("Session:",t)},[r,t]),(0,n.useEffect)(()=>{"authenticated"===r&&t&&(console.log("Authenticated, redirecting to rooms..."),e.push("/rooms"))},[r,t,e]);let P=async t=>{t.preventDefault(),m(!0),g("");try{if(u){var r;console.log("Signing up user:",{fullName:x,email:b,mobileNumber:y,password:w});let t=await (0,o.signIn)("credentials",{redirect:!1,email:b,password:w});if(null==t?void 0:t.error){g("Error signing up. Please try again.");return}let{data:a}=await fetch("/api/auth/session").then(e=>e.json());if(null==a?void 0:null===(r=a.user)||void 0===r?void 0:r.name)console.log("Session updated:",a);else{g("Failed to update session after sign-up.");return}e.push("/rooms")}else{let t=await (0,o.signIn)("credentials",{redirect:!1,email:b,password:w});if(null==t?void 0:t.error){g("Invalid email or password. Please try again.");return}e.push("/rooms")}}catch(e){console.error("Error during authentication:",e),g("An unexpected error occurred. Please try again.")}finally{m(!1)}},k=async()=>{try{m(!0),g("");let t=await (0,o.signIn)("google",{redirect:!1,callbackUrl:"/rooms"});if(null==t?void 0:t.error){g("Failed to sign in with Google. Please try again.");return}e.push(t.url)}catch(e){g("An unexpected error occurred. Please try again.")}finally{m(!1)}};return"loading"===r?(0,a.jsx)("div",{className:"min-h-screen flex justify-center items-center",children:(0,a.jsx)(f,{className:"h-8 w-8 animate-spin"})}):(0,a.jsx)("section",{className:"min-h-screen flex justify-center items-center w-full bg-yellow-600",children:(0,a.jsxs)("div",{className:"bg-[#dfa674] rounded-2xl flex max-w-3xl p-5 items-center",children:[(0,a.jsxs)("div",{className:"md:w-1/2 px-8",children:[(0,a.jsx)("h2",{className:"font-bold text-3xl text-[#002D74]",children:u?"Sign Up":"Login"}),(0,a.jsx)("p",{className:"text-sm mt-4 text-[#002D74]",children:u?"Create a new account":"Login with your email and password"}),h&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mt-4",role:"alert",children:(0,a.jsx)("span",{className:"block sm:inline",children:h})}),(0,a.jsxs)("form",{onSubmit:P,className:"flex flex-col",children:[u&&(0,a.jsx)("input",{className:"p-2 mt-2 rounded-xl border",type:"text",name:"fullName",placeholder:"Full Name",value:x,onChange:e=>p(e.target.value)}),(0,a.jsx)("input",{className:"p-2 mt-2 rounded-xl border",type:"email",name:"email",placeholder:"Enter Email",value:b,onChange:e=>v(e.target.value)}),u&&(0,a.jsx)("input",{className:"p-2 mt-8 rounded-xl border",type:"text",name:"mobileNumber",placeholder:"Enter Mobile Number",value:y,onChange:e=>j(e.target.value)}),(0,a.jsx)("input",{className:"p-2 mt-8 rounded-xl border",type:"password",name:"password",placeholder:"Enter Password",value:w,onChange:e=>N(e.target.value)}),u&&(0,a.jsx)("input",{className:"p-2 mt-8 rounded-xl border",type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:S,onChange:e=>C(e.target.value)}),(0,a.jsx)("button",{className:"bg-[#002D74] text-white py-2 rounded-xl hover:scale-105 duration-300 hover:bg-[#206ab1] font-medium mt-4",type:"submit",children:u?"Sign Up":"Login"})]}),(0,a.jsxs)("div",{className:"mt-6 items-center text-gray-100 flex",children:[(0,a.jsx)("hr",{className:"border-gray-300 flex-grow"}),(0,a.jsx)("p",{className:"text-center text-sm mx-4",children:"OR"}),(0,a.jsx)("hr",{className:"border-gray-300 flex-grow"})]}),(0,a.jsx)("button",{onClick:k,disabled:c,className:"bg-white border py-2 w-full rounded-xl mt-5 flex justify-center items-center text-sm hover:scale-105 duration-300 hover:bg-gray-50 font-medium disabled:opacity-70 disabled:hover:scale-100",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f,{className:"mr-2 h-5 w-5 animate-spin"}),"Signing in..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.F4b,{className:"mr-3 h-6 w-6"}),"Sign in with Google"]})}),(0,a.jsx)("div",{className:"mt-10 text-sm border-b border-gray-500 py-5 flex items-center justify-center",children:(0,a.jsx)("button",{className:"text-[#002D74] hover:underline",onClick:()=>d(!u),children:u?"Already have an account? Login":"Don't have an account? Sign Up"})})]}),(0,a.jsx)("div",{className:"md:block hidden w-1/2",children:(0,a.jsx)(l.default,{src:"/images/img3.jpg",width:500,height:400,className:"rounded-2xl max-h-[1600px]",alt:"login form image"})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[753,565,161,441,517,358],()=>t(9099)),_N_E=e.O()}]);