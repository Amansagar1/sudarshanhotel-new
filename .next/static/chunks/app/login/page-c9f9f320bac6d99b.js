(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{9099:(e,r,t)=>{Promise.resolve().then(t.bind(t,4348))},6046:(e,r,t)=>{"use strict";var a=t(6658);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},5353:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return n}});let a=t(2115);function n(e,r){let t=(0,a.useRef)(()=>{}),n=(0,a.useRef)(()=>{});return(0,a.useMemo)(()=>e&&r?a=>{null===a?(t.current(),n.current()):(t.current=s(e,a),n.current=s(r,a))}:e||r,[e,r])}function s(e,r){if("function"!=typeof e)return e.current=r,()=>{e.current=null};{let t=e(r);return"function"==typeof t?t:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),e.exports=r.default)},3576:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"RouterContext",{enumerable:!0,get:function(){return a}});let a=t(306)._(t(2115)).default.createContext(null)},4348:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>f});var a=t(5155),n=t(2115),s=t(9506),l=t(5565),o=t(2615),i=t(6046);let u=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),d=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let m=(0,n.forwardRef)((e,r)=>{let{color:t="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:l,className:o="",children:i,iconNode:u,...m}=e;return(0,n.createElement)("svg",{ref:r,...c,width:a,height:a,stroke:t,strokeWidth:l?24*Number(s)/Number(a):s,className:d("lucide",o),...m},[...u.map(e=>{let[r,t]=e;return(0,n.createElement)(r,t)}),...Array.isArray(i)?i:[i]])}),h=((e,r)=>{let t=(0,n.forwardRef)((t,a)=>{let{className:s,...l}=t;return(0,n.createElement)(m,{ref:a,iconNode:r,className:d("lucide-".concat(u(e)),s),...l})});return t.displayName="".concat(e),t})("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),f=()=>{let e=(0,i.useRouter)(),{data:r,status:t}=(0,o.useSession)(),[u,d]=(0,n.useState)(!1),[c,m]=(0,n.useState)(!1),[f,g]=(0,n.useState)(""),[x,p]=(0,n.useState)(""),[b,y]=(0,n.useState)(""),[v,w]=(0,n.useState)(""),[j,N]=(0,n.useState)(""),[P,C]=(0,n.useState)("");(0,n.useEffect)(()=>{console.log("Auth Status:",t),console.log("Session:",r)},[t,r]),(0,n.useEffect)(()=>{"authenticated"===t&&r&&(console.log("Authenticated, redirecting to rooms..."),e.push("/rooms"))},[t,r,e]);let S=()=>b&&j?!u||j===P||(g("Passwords do not match."),!1):(g("Email and Password are required."),!1),k=async r=>{if(r.preventDefault(),m(!0),g(""),!S()){m(!1);return}try{if(u){var t;let r=await (0,o.signIn)("credentials",{redirect:!1,email:b,password:j});if(null==r?void 0:r.error){g("Error signing up. Please try again.");return}let{data:a}=await fetch("/api/auth/session").then(e=>e.json());(null==a?void 0:null===(t=a.user)||void 0===t?void 0:t.name)?e.push("/rooms"):g("Failed to update session after sign-up.")}else{let r=await (0,o.signIn)("credentials",{redirect:!1,email:b,password:j});if(null==r?void 0:r.error){g("Invalid email or password. Please try again.");return}e.push("/rooms")}}catch(e){console.error("Error during authentication:",e),g("An unexpected error occurred. Please try again.")}finally{m(!1)}},E=async()=>{try{m(!0),g("");let r=await (0,o.signIn)("google",{redirect:!1,callbackUrl:"/rooms"});if(null==r?void 0:r.error){g("Failed to sign in with Google. Please try again.");return}r.url?e.push(r.url):g("An error occurred while logging in. Please try again.")}catch(e){g("An unexpected error occurred. Please try again.")}finally{m(!1)}};return"loading"===t?(0,a.jsx)("div",{className:"min-h-screen flex justify-center items-center",children:(0,a.jsx)(h,{className:"h-8 w-8 animate-spin"})}):(0,a.jsx)("section",{className:"min-h-screen flex justify-center items-center w-full bg-yellow-600",children:(0,a.jsxs)("div",{className:"bg-[#dfa674] rounded-2xl flex max-w-3xl p-5 items-center",children:[(0,a.jsxs)("div",{className:"md:w-1/2 px-8",children:[(0,a.jsx)("h2",{className:"font-bold text-3xl text-[#002D74]",children:u?"Sign Up":"Login"}),(0,a.jsx)("p",{className:"text-sm mt-4 text-[#002D74]",children:u?"Create a new account":"Login with your email and password"}),f&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mt-4",role:"alert",children:(0,a.jsx)("span",{className:"block sm:inline",children:f})}),(0,a.jsxs)("form",{onSubmit:k,className:"flex flex-col",children:[u&&(0,a.jsx)("input",{className:"p-2 mt-2 rounded-xl border",type:"text",name:"fullName",placeholder:"Full Name",value:x,onChange:e=>p(e.target.value)}),(0,a.jsx)("input",{className:"p-2 mt-2 rounded-xl border",type:"email",name:"email",placeholder:"Enter Email",value:b,onChange:e=>y(e.target.value)}),u&&(0,a.jsx)("input",{className:"p-2 mt-8 rounded-xl border",type:"text",name:"mobileNumber",placeholder:"Enter Mobile Number",value:v,onChange:e=>w(e.target.value)}),(0,a.jsx)("input",{className:"p-2 mt-8 rounded-xl border",type:"password",name:"password",placeholder:"Enter Password",value:j,onChange:e=>N(e.target.value)}),u&&(0,a.jsx)("input",{className:"p-2 mt-8 rounded-xl border",type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:P,onChange:e=>C(e.target.value)}),(0,a.jsx)("button",{className:"bg-[#002D74] text-white py-2 rounded-xl hover:scale-105 duration-300 hover:bg-[#206ab1] font-medium mt-4",type:"submit",children:u?"Sign Up":"Login"})]}),(0,a.jsxs)("div",{className:"mt-6 items-center text-gray-100 flex",children:[(0,a.jsx)("hr",{className:"border-gray-300 flex-grow"}),(0,a.jsx)("p",{className:"text-center text-sm mx-4",children:"OR"}),(0,a.jsx)("hr",{className:"border-gray-300 flex-grow"})]}),(0,a.jsx)("button",{onClick:E,disabled:c,className:"bg-white border py-2 w-full rounded-xl mt-5 flex justify-center items-center text-sm hover:scale-105 duration-300 hover:bg-gray-50 font-medium disabled:opacity-70 disabled:hover:scale-100",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h,{className:"mr-2 h-5 w-5 animate-spin"}),"Signing in..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.F4b,{className:"mr-3 h-6 w-6"}),"Sign in with Google"]})}),(0,a.jsx)("div",{className:"mt-10 text-sm border-b border-gray-500 py-5 flex items-center justify-center",children:(0,a.jsx)("button",{className:"text-[#002D74] hover:underline",onClick:()=>d(!u),children:u?"Already have an account? Login":"Don't have an account? Sign Up"})})]}),(0,a.jsx)("div",{className:"md:block hidden w-1/2",children:(0,a.jsx)(l.default,{src:"/images/img3.jpg",width:500,height:400,className:"rounded-2xl max-h-[1600px]",alt:"login form image"})})]})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[753,565,161,441,517,358],()=>r(9099)),_N_E=e.O()}]);