"use strict";(()=>{var e={};e.id=651,e.ids=[651],e.modules={5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6762:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},1519:(e,t,r)=>{let a;r.r(t),r.d(t,{config:()=>y,default:()=>A,routeModule:()=>g});var n={};r.r(n),r.d(n,{default:()=>v});var i=r(9947),l=r(325),o=r(6762);let s=require("next-auth");var u=r.n(s);let d=require("next-auth/providers/credentials");var c=r.n(d);let p=require("next-auth/providers/google");var f=r.n(p);a=new(require("mongodb")).MongoClient(process.env.MONGODB_URI).connect();let P=require("bcryptjs");var m=r.n(P);let b=async e=>{let t=(await a).db().collection("users");return await t.findOne({email:e})},w=async e=>{let t=(await a).db().collection("users");return await t.insertOne(e)},h=async e=>await m().hash(e,12),E=async(e,t)=>m().compare(e,t),v=u()({providers:[c()({name:"Credentials",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"},fullName:{label:"Full Name",type:"text"},mobileNumber:{label:"Mobile Number",type:"text"},isSignUp:{label:"Sign Up",type:"checkbox"}},async authorize(e){let{email:t,password:r,fullName:a,mobileNumber:n,isSignUp:i}=e;if(!t||!r)return null;if(i){if(await b(t))throw Error("User already exists");let e=await h(r);return await w({email:t,password:e,name:a,mobileNumber:n}),{email:t}}let l=await b(t);if(!l||!await E(r,l.password))throw Error("Invalid email or password");return{email:t}}}),f()({clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET})],pages:{signIn:"/login",error:"/auth/error"},callbacks:{redirect:async({url:e,baseUrl:t})=>e.startsWith(t)?e:t}}),A=(0,o.M)(n,"default"),y=(0,o.M)(n,"config"),g=new i.PagesAPIRouteModule({definition:{kind:l.A.PAGES_API,page:"/api/auth/[...nextauth]",pathname:"/api/auth/[...nextauth]",bundlePath:"",filename:""},userland:n})},325:(e,t)=>{var r;Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE"}(r||(r={}))},9947:(e,t,r)=>{e.exports=r(5600)}};var t=require("../../../webpack-api-runtime.js");t.C(e);var r=t(t.s=1519);module.exports=r})();