"use strict";(()=>{var e={};e.id=536,e.ids=[536],e.modules={5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6762:(e,o)=>{Object.defineProperty(o,"M",{enumerable:!0,get:function(){return function e(o,r){return r in o?o[r]:"then"in o&&"function"==typeof o.then?o.then(o=>e(o,r)):"function"==typeof o&&"default"===r?o:void 0}}})},7767:(e,o,r)=>{r.r(o),r.d(o,{config:()=>m,default:()=>c,routeModule:()=>d});var t={};r.r(t),r.d(t,{default:()=>u});var n=r(9947),i=r(325),s=r(6762);let a=require("nodemailer");var l=r.n(a);async function u(e,o){if("POST"!==e.method)return o.status(405).send({message:"Only POST requests are allowed"});let{userEmail:r,bookingData:t}=e.body,n=l().createTransport({service:"Gmail",auth:{user:process.env.SMTP_EMAIL,pass:process.env.SMTP_PASSWORD}}),i={from:`"Hotel Booking" <${process.env.SMTP_EMAIL}>`,to:r,subject:"Booking Confirmation",text:`Hi, your booking for the room "${t.roomTitle}" has been confirmed. Total cost: ₹${t.roomPrice}.`,html:`<p>Hi,</p>
           <p>Your booking for the room <b>${t.roomTitle}</b> has been confirmed.</p>
           <p>Total cost: <b>₹${t.roomPrice}</b>.</p>`},s={from:`"Hotel Booking" <${process.env.SMTP_EMAIL}>`,to:process.env.ADMIN_EMAIL,subject:"New Booking Notification",text:`A new booking has been made. Room: ${t.roomTitle}. Total cost: ₹${t.roomPrice}.`,html:`<p>A new booking has been made:</p>
           <ul>
             <li>Room: <b>${t.roomTitle}</b></li>
             <li>Price: <b>₹${t.roomPrice}</b></li>
           </ul>`};try{return await n.sendMail(i),await n.sendMail(s),o.status(200).json({message:"Emails sent successfully!"})}catch(e){return console.error("Email Error:",e),o.status(500).json({message:"Error sending emails",error:e})}}let c=(0,s.M)(t,"default"),m=(0,s.M)(t,"config"),d=new n.PagesAPIRouteModule({definition:{kind:i.A.PAGES_API,page:"/api/sendMail",pathname:"/api/sendMail",bundlePath:"",filename:""},userland:t})},325:(e,o)=>{var r;Object.defineProperty(o,"A",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE"}(r||(r={}))},9947:(e,o,r)=>{e.exports=r(5600)}};var o=require("../../webpack-api-runtime.js");o.C(e);var r=o(o.s=7767);module.exports=r})();