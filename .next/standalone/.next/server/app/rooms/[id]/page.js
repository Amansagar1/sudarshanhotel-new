(()=>{var e={};e.id=781,e.ids=[781],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},2412:e=>{"use strict";e.exports=require("assert")},4735:e=>{"use strict";e.exports=require("events")},9021:e=>{"use strict";e.exports=require("fs")},1630:e=>{"use strict";e.exports=require("http")},5591:e=>{"use strict";e.exports=require("https")},1820:e=>{"use strict";e.exports=require("os")},3873:e=>{"use strict";e.exports=require("path")},7910:e=>{"use strict";e.exports=require("stream")},3997:e=>{"use strict";e.exports=require("tty")},9551:e=>{"use strict";e.exports=require("url")},8354:e=>{"use strict";e.exports=require("util")},4075:e=>{"use strict";e.exports=require("zlib")},3906:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c});var r=s(260),a=s(8203),i=s(5155),l=s.n(i),o=s(7292),n={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);s.d(t,n);let c=["",{children:["rooms",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1256)),"D:\\private work\\sudarshanhotel-new\\src\\app\\rooms\\[id]\\page.js"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,1354)),"D:\\private work\\sudarshanhotel-new\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9937,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["D:\\private work\\sudarshanhotel-new\\src\\app\\rooms\\[id]\\page.js"],m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/rooms/[id]/page",pathname:"/rooms/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4264:(e,t,s)=>{Promise.resolve().then(s.bind(s,1256))},5435:(e,t,s)=>{Promise.resolve().then(s.bind(s,2170))},7466:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>n});let r={_origin:"https://api.emailjs.com"},a=(e,t,s)=>{if(!e)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!s)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class i{constructor(e){this.status=e.status,this.text=e.responseText}}let l=(e,t,s={})=>new Promise((a,l)=>{let o=new XMLHttpRequest;o.addEventListener("load",({target:e})=>{let t=new i(e);200===t.status||"OK"===t.text?a(t):l(t)}),o.addEventListener("error",({target:e})=>{l(new i(e))}),o.open("POST",r._origin+e,!0),Object.keys(s).forEach(e=>{o.setRequestHeader(e,s[e])}),o.send(t)}),o=e=>{let t;if(!(t="string"==typeof e?document.querySelector(e):e)||"FORM"!==t.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return t},n={init:(e,t="https://api.emailjs.com")=>{r._userID=e,r._origin=t},send:(e,t,s,i)=>{let o=i||r._userID;return a(o,e,t),l("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:o,service_id:e,template_id:t,template_params:s}),{"Content-type":"application/json"})},sendForm:(e,t,s,i)=>{let n=i||r._userID,c=o(s);a(n,e,t);let d=new FormData(c);return d.append("lib_version","3.2.0"),d.append("service_id",e),d.append("template_id",t),d.append("user_id",n),l("/api/v1.0/email/send-form",d)}}},9334:(e,t,s)=>{"use strict";var r=s(8686);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},4733:(e,t,s)=>{"use strict";s.d(t,{G_:()=>l,Sx:()=>o,R4:()=>n});var r=s(5668);let a="http://hotelsudarshan.com:5000",i={GET_ROOMSDETAILS:()=>a+"/api/roomdetails",BOOKING_ROOMS:()=>a+"/api/book",POST_ROOMS:()=>a+"/api/rooms",GET_ROOMID:e=>a+`/api/rooms/:${e} `};Object.freeze(i);let l=()=>{let e=i.GET_ROOMSDETAILS();return console.log("Requesting URL:",e),r.A.get(e).then(e=>(console.log("API Response:",e.data),{result:e.data})).catch(e=>(console.error("Error details:",{message:e.message,code:e.code,config:e.config,response:e.response}),{result:null}))},o=e=>r.A.get(`${i.GET_ROOMSDETAILS()}/${e}`).then(e=>(console.log("API Response:",e.data),{result:e.data})).catch(e=>(console.error("Error fetching room data:",e),{result:null})),n=async e=>{try{let t=await fetch(i.BOOKING_ROOMS(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Booking failed");return await t.json()}catch(e){throw console.error("Error in roomBooking:",e),e}}},2170:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(5512),a=s(8009),i=s(9334),l=s(4733),o=s(2414),n=s(5103),c=s(6008),d=s(7466);let m=({isVisible:e,onClose:t,roomDetails:s})=>{let[i,o]=(0,a.useState)({firstName:"",lastName:"",address:"",city:"",pincode:"",phone:"",email:"",checkIn:"",checkOut:"",checkInTime:"",checkOutTime:"",roomPreference:"",numberOfAdults:"",roomId:s?._id,price:s?.price,title:s?.title}),[n,c]=(0,a.useState)(!1),[m,u]=(0,a.useState)({}),[h,p]=(0,a.useState)(!1);(0,a.useEffect)(()=>{console.log("Room Details:",s)},[s]);let g=e=>{let{name:t,value:s}=e.target;o(e=>({...e,[t]:s})),u(e=>({...e,[t]:""}))},x=()=>{let e={};return Object.keys(i).forEach(t=>{i[t]||"roomPreference"===t||(e[t]="This field is required.")}),i.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)&&(e.email="Please enter a valid email address."),i.phone&&!/^[0-9]{10}$/.test(i.phone)&&(e.phone="Phone number must be 10 digits."),i.checkInTime>=i.checkOutTime&&(e.checkOutTime="Check-out time must be later than check-in time."),u(e),0===Object.keys(e).length},b=async e=>{let t={to_name:`${e.firstName} ${e.lastName}`,to_email:e.email,room_title:e.title,check_in:`${e.checkIn} at ${e.checkInTime}`,check_out:`${e.checkOut} at ${e.checkOutTime}`,price:e.price},s={to_name:"Hotel Management",to_email:"hotelsudarshan01@gmail.com",...e};try{await d.Ay.send("service_ap02rab","template_2ys919i",t,"e8oLmeL97LLcEGZ_X"),console.log("Email sent to user successfully."),await d.Ay.send("service_ap02rab","template_2ys919i",s,"e8oLmeL97LLcEGZ_X"),console.log("Email sent to hotel successfully.")}catch(e){console.error("Error sending emails:",e)}},f=async e=>{if(e.preventDefault(),!x()){alert("Please correct the highlighted errors.");return}p(!0);try{let e=await (0,l.R4)(i);e.success?(c(!0),alert("Booking successful!"),await b(i)):alert(`Booking failed: ${e.message}`)}catch(e){console.error("Error during booking:",e),alert("An error occurred while processing your booking. Please try again.")}finally{p(!1)}};return e?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 w-full",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-5 w-[800px]",children:[(0,r.jsx)("div",{className:"h-48 bg-cover bg-center relative",style:{backgroundImage:"url('/images/img4.jpg')"},children:(0,r.jsx)("div",{className:"bg-black bg-opacity-50 h-full flex items-center justify-center text-white",children:(0,r.jsx)("h1",{className:"text-3xl font-bold",children:n?"Booking Confirmed!":"Complete Your Booking"})})}),(0,r.jsx)("div",{className:"p-6",children:n?(0,r.jsxs)("div",{className:"text-center p-4",children:[(0,r.jsx)("h2",{className:"text-2xl text-green-500 font-semibold",children:"Thank you for choosing us!"}),(0,r.jsx)("p",{className:"mt-4 text-gray-700",children:"Your booking was successful. We look forward to your stay!"}),(0,r.jsx)("button",{onClick:t,className:"mt-6 bg-blue-500 text-white py-2 px-6 rounded-lg hover:bg-blue-600",children:"Close"})]}):(0,r.jsxs)("form",{onSubmit:f,className:"space-y-4 overflow-scroll h-[500px]",children:[[{label:"First Name",name:"firstName"},{label:"Last Name",name:"lastName"},{label:"Address",name:"address"},{label:"City",name:"city"},{label:"Pincode",name:"pincode"},{label:"Phone",name:"phone"},{label:"Email",name:"email"},{label:"Check-in Date",name:"checkIn",type:"date"},{label:"Check-out Date",name:"checkOut",type:"date"},{label:"Check-in Time",name:"checkInTime",type:"time"},{label:"Check-out Time",name:"checkOutTime",type:"time"},{label:"Number of Adults",name:"numberOfAdults"}].map((e,t)=>(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:e.label}),(0,r.jsx)("input",{type:e.type||"text",name:e.name,value:i[e.name],onChange:g,className:`w-full p-2 border rounded-lg ${m[e.name]?"border-red-500":"border-gray-300"}`}),m[e.name]&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:m[e.name]})]},t)),(0,r.jsxs)("div",{className:"flex justify-end gap-4 mt-6",children:[(0,r.jsx)("button",{type:"submit",disabled:h,className:`bg-blue-500 text-white font-medium py-2 px-6 rounded-lg ${h?"opacity-50 cursor-not-allowed":"hover:bg-blue-600"}`,children:h?"Submitting...":"Confirm Booking"}),(0,r.jsx)("button",{type:"button",onClick:t,className:"border border-red-500 text-red-500 font-medium py-2 px-6 rounded-lg hover:bg-red-100",children:"Cancel"})]})]})})]})}):null},u=()=>{let[e,t]=(0,a.useState)(null),[s,d]=(0,a.useState)(null),{id:u}=(0,i.useParams)(),[h,p]=(0,a.useState)(0),[g,x]=(0,a.useState)(!1),[b,f]=(0,a.useState)(!1),j=(0,i.useRouter)();(0,a.useEffect)(()=>{(async()=>{let e=await fetch("/api/auth/session").then(e=>e.json());f(!!e?.user)})()}),(0,a.useEffect)(()=>{(async()=>{try{if(u){let e=await (0,l.Sx)(u);e&&e.result?t(e.result):d("Room not found.")}}catch(e){d("Error fetching room details."),console.error("Fetch Error:",e)}})()},[u]);let v=e?.images||["/images/img1.jpg","/images/img2.jpg","/images/img3.jpg"],y=async t=>{let s={...t,roomId:e._id,roomTitle:e.title,roomPrice:e.price};try{let e=await fetch("/api/book",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),t=await e.json();t.success?(console.log("Booking confirmed:",t),await fetch("../../../pages/api/sendMail.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:t.userEmail,bookingData:s})})):console.error("Booking failed:",t.message)}catch(e){console.error("Error during booking:",e)}};return s?(0,r.jsx)("div",{className:"text-center text-red-500",children:s}):e?(0,r.jsxs)("div",{className:"font-sans w-full",children:[(0,r.jsxs)("div",{className:"relative bg-cover bg-center h-[400px] flex items-center justify-center text-center text-white",style:{backgroundImage:"url('/images/img2.jpg')"},children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50"}),(0,r.jsxs)("div",{className:"relative z-10 w-full max-w-5xl mx-auto p-4",children:[(0,r.jsx)("h1",{className:"text-4xl md:text-5xl font-extrabold leading-tight",children:e.title}),(0,r.jsxs)("div",{className:"text-lg mt-4",children:[(0,r.jsx)(c.default,{href:"/",className:"hover:underline",children:"Home /"}),(0,r.jsx)("span",{className:"text-lg mt-2",children:(0,r.jsx)(c.default,{href:"/rooms",className:"hover:underline",children:"Rooms & Suites"})})]})]})]}),(0,r.jsx)("div",{className:"w-full flex justify-center items-center bg-yellow-100 h-auto p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl w-full bg-white shadow-lg rounded-lg flex flex-col md:flex-row",children:[(0,r.jsxs)("div",{className:"relative w-full md:w-1/2 bg-gray-200 h-[400px] md:h-auto",children:[(0,r.jsx)(n.default,{src:v[h]||"/images/img1.jpg",alt:"Room Image",className:"w-full h-full object-cover rounded-l-lg",layout:"fill",objectFit:"cover"}),(0,r.jsx)("button",{onClick:()=>{p(e=>0===e?v.length-1:e-1)},className:"absolute top-1/2 left-2 text-white bg-black bg-opacity-50 p-2 rounded-full",children:"<"}),(0,r.jsx)("button",{onClick:()=>{p(e=>(e+1)%v.length)},className:"absolute top-1/2 right-2 text-white bg-black bg-opacity-50 p-2 rounded-full",children:">"})]}),(0,r.jsxs)("div",{className:"w-full md:w-1/2 p-8",children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold w-full justify-between flex",children:[e.title,(0,r.jsx)("span",{children:(0,r.jsx)("div",{className:`top-4 right-4 px-4 py-2 text-sm rounded-full ${e.available?"bg-green-500":"bg-red-500"} text-white`,children:e.available?"Available":"Not Available"})})]}),(0,r.jsx)("p",{className:"text-gray-700 mb-6",children:e.description||"Description not available"}),(0,r.jsxs)("p",{className:"text-lg font-semibold mb-4",children:["Price: ₹",e.price||"N/A"]}),(0,r.jsxs)("p",{className:"text-yellow-500 font-bold mb-6",children:["Rating: ",e.rating||"No rating"," ⭐"]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Features"}),(0,r.jsx)("ul",{className:"list-disc list-inside text-gray-700",children:e.features?.length?e.features.map((e,t)=>(0,r.jsx)("li",{children:e},t)):(0,r.jsx)("li",{children:"No features available"})})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Room Amenities"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-4 text-gray-700",children:e.amenities?.length?e.amenities.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(o.pXu,{className:"text-blue-500"})," ",e]},t)):(0,r.jsx)("p",{children:"No amenities available"})})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Facilities"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-4 text-gray-700",children:e.facilities?.length?e.facilities.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(o.sPh,{className:"text-blue-500"})," ",e]},t)):(0,r.jsx)("p",{children:"No facilities available"})})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("button",{className:`py-2 rounded-lg font-semibold ${e.available?"bg-blue-500 text-white hover:bg-blue-600 cursor-pointer":"bg-gray-400 text-gray-600 cursor-not-allowed"}`,onClick:()=>{b?x(!0):j.push("/login")},disabled:!e.available,children:e.available?`Book - ${e.price||"N/A"}`:"Room Unavailable"}),(0,r.jsx)("button",{className:"bg-transparent text-blue-500 font-semibold py-2 rounded-lg border border-blue-500",children:"Save to Wishlist"})]})]})]})}),(0,r.jsx)(m,{isVisible:g,onClose:()=>{x(!1)},onSubmit:y,roomDetails:e})]}):(0,r.jsx)("div",{className:"text-center",children:"Loading..."})}},1256:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\private work\\\\sudarshanhotel-new\\\\src\\\\app\\\\rooms\\\\[id]\\\\page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\private work\\sudarshanhotel-new\\src\\app\\rooms\\[id]\\page.js","default")},440:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(8077);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[989,601,77,668,691],()=>s(3906));module.exports=r})();